<!DOCTYPE html>
<html>
<body>

<h1>My First Heading</h1>
<p>My first paragraph.</p>
    
    <p> api speed test </p>
<textarea name="text" id="urltext" cols="74" rows="1"></textarea>
    <br>
 <script>
   
var elem=document.getElementById('urltext')
var leoTime=0, promp='fat cat'
var leoWait=10, dims=512, leo
var leoApiKey
elem.value='Hello'
leoApiKey=prompt('enter key')
leonardo()
function leonardo(){
  const option1 = {
  method: 'POST',
  headers: {
    accept: 'application/json',
    'content-type': 'application/json',
    authorization: `Bearer ${leoApiKey}`
  },
  body: JSON.stringify({prompt: promp,
  modelId:"b820ea11-02bf-4652-97ae-9ac0cc00593d", width: dims, height: dims,
  
  scheduler: "LEONARDO", num_inference_steps: 30, sd_version: 'v2'})
};
leo=""
fetch('https://cloud.leonardo.ai/api/rest/v1/generations', option1)
  .then(response => response.json())
  .then(data => {leo=data.sdGenerationJob.generationId
                elem.value="SeriesID "+leo
                leoTimer()})
  .catch(err => {alert('APIerror check key')
                 leoTime=0
 
                 elem.value="cccc"
                 }
                 );
}
function leoTimer(){
  if(leoTime<10){leoTime++;
                 elem.value=leoTime
                 setTimeout(leoTimer,100);return}
  
  //secondAPI()
}
function secondAPI(){
  elem.value='Fetching Image URLs'
 
  const option2 = {
  method: 'GET',
  headers: {
    accept: 'application/json',
    authorization: `Bearer ${leoApiKey}`
  }
};
   fetch('https://cloud.leonardo.ai/api/rest/v1/generations/'+leo, option2)
  .then(response => response.json())
  .then(data => {
     
    alert(data.generations_by_pk.generated_images[0].url)
    
    }
    
        
   </script>
  </body>
</html>
</body>
</html>
