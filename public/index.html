<!DOCTYPE html>
<html>
<body>

<h1>My First Heading</h1>
<p>My first paragraph.</p>
    <canvas id="vCanvas1" width="100" height="20" style="border:2px solid #f393d3"></canvas>
    <canvas id="vCanvas2" width="100" height="20" style="border:2px solid #f393d3"></canvas>
    <canvas id="vCanvas3" width="100" height="20" style="border:2px solid #f393d3"></canvas>
    <canvas id="vCanvas4" width="100" height="20" style="border:2px solid #f393d3"></canvas>
    <canvas id="vCanvas5" width="100" height="20" style="border:2px solid #f393d3"></canvas>
    <br>
    <canvas id="Canvas1" width="100" height="100" style="border:2px solid #d3d3d3"></canvas>
    <canvas id="Canvas2" width="100" height="100" style="border:2px solid #d3d3d3"></canvas>
    <canvas id="Canvas3" width="100" height="100" style="border:2px solid #d3d3d3"></canvas>
    <canvas id="Canvas4" width="100" height="100" style="border:2px solid #d3d3d3"></canvas>
    <canvas id="Canvas5" width="100" height="100" style="border:2px solid #d3d3d3"></canvas>
    <br>
 <p> this is a test </p>
 <br>
<textarea name="text" id="urltext" cols="74" rows="1"></textarea>
 <br>
 <script>
   
var elem=document.getElementById('urltext')
var leoTime=0
var leo=""
var leoApiKey
elem.value='Hello'
alert('starting')
leoApiKey="693a5c60-f266-4bf7-934f-3db55cd5c5f6"
     

leonardo()
     

   
function leonardo(){
    
  const option1 = {
  method: 'POST',
  headers: {accept: 'application/json', 'content-type': 'application/json',
    authorization: `Bearer ${leoApiKey}` },
  body: JSON.stringify({prompt: 'cat', 
  modelId: '6bef9f1b-29cb-40c7-b9df-32b51c1f67d3',
  width: 512, height: 512})
      }


    
fetch('https://cloud.leonardo.ai/api/rest/v1/generations', option1)
  .then(response => response.json())
  .then(data => {
    leo=data.sdGenerationJob.generationId
                elem.value="SeriesID "+leo
                leoTimer()
                
                })
  .catch(err => {alert('APIerror check key')} )
  
  
  
 }
     
function leoTimer(){
  if(leoTime<100){leoTime++;
                 elem.value=leoTime
                 setTimeout(leoTimer,100);return}
  
  //secondAPI()
}
  
  
  
    
function secondAPI(){
  

  const option2 = {
  method: 'GET',
  headers: {
    accept: 'application/json',
    authorization: `Bearer ${leoApiKey}`
  }
};
    
   fetch('https://cloud.leonardo.ai/api/rest/v1/generations/'+leo, option2)
  .then(response => response.json())
  .then(data => {
  //  alert(data.generations_by_pk.generated_images[0].url)
   })
   
    
    alert("end")
 }   
 
    
   </script>
</body>
</html>
